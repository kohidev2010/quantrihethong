ğŸ› ï¸ CÃC BÆ¯á»šC TRIá»‚N KHAI ADFS + GIAO DIá»†N WEB
ğŸ”¹ BÆ¯á»šC 1 â€“ Táº¡o vÃ  cáº¥p chá»©ng chá»‰ SSL cho adfs.kohi.com
Táº¡i mÃ¡y ADFS-SRV:

Má»Ÿ MMC â†’ Add snap-in Certificates > Computer account

Chuá»™t pháº£i vÃ o Personal > Certificates â†’
All Tasks > Advanced Operations > Create Custom Request...

Chá»n:

Proceed without enrollment policy

No template (CNG key)

Trong Details > Properties:

Subject Name: CN = adfs.kohi.com

Alternative Name (SAN): DNS = adfs.kohi.com

Tab Private Key: tick Make private key exportable

Xuáº¥t file .req

Ná»™p .req lÃªn CA (báº±ng GUI MMC hoáº·c http://localhost/certsrv)

Nháº­n vá» file .cer â†’ Import vÃ o:

MMC > Personal > Certificates trÃªn mÃ¡y ADFS

ğŸ”¹ BÆ¯á»šC 2 â€“ Táº¡o báº£n ghi DNS cho ADFS
Táº¡i mÃ¡y Domain Controller (cÃ³ DNS Server):

Má»Ÿ DNS Manager

VÃ o Forward Lookup Zone kohi.com â†’ New Host (A):

Name: adfs

IP: 192.168.1.140 (mÃ¡y ADFS-SRV)

âœ… Kiá»ƒm tra:

bash
Sao chÃ©p mÃ£
ping adfs.kohi.com
ğŸ”¹ BÆ¯á»šC 3 â€“ CÃ i Ä‘áº·t role ADFS
Táº¡i ADFS-SRV:

VÃ o Server Manager > Add Roles and Features

Chá»n role:

âœ… Active Directory Federation Services

CÃ i Ä‘áº·t vÃ  chá» hoÃ n táº¥t

ğŸ”¹ BÆ¯á»šC 4 â€“ Cáº¥u hÃ¬nh ADFS
Sau khi cÃ i xong sáº½ cÃ³ tÃ¹y chá»n:
ğŸ‘‰ â€œConfigure the federation service on this serverâ€

Cháº¡y wizard vÃ  chá»n:

Create the first federation server in a federation server farm

Chá»©ng chá»‰ SSL: chá»n adfs.kohi.com vá»«a import

Federation Service Name: adfs.kohi.com

Display Name: vÃ­ dá»¥ KOHI ADFS

Chá»n tÃ i khoáº£n domain admin: vÃ­ dá»¥ kohi\administrator

Database: chá»n Windows Internal Database náº¿u khÃ´ng cÃ³ SQL Server

â†’ Nháº¥n Configure â†’ chá» hoÃ n táº¥t (cÃ³ thá»ƒ vÃ i phÃºt)

ğŸ”¹ BÆ¯á»šC 5 â€“ Kiá»ƒm tra giao diá»‡n web ADFS
Tá»« client Ä‘Ã£ join domain, má»Ÿ trÃ¬nh duyá»‡t (Chrome, Edge, hoáº·c IE):

url
Sao chÃ©p mÃ£
https://adfs.kohi.com/adfs/ls/IdpInitiatedSignOn.aspx